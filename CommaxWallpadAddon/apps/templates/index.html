<!DOCTYPE html>
<html>
<head>
    <title>Commax Wallpad Controller</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="./static/style.css">
</head>
<body>
    <h1>Commax Wallpad Controller</h1>
    
    <div class="device-section">
        <button onclick="findDevices()">기기 검색</button>
        <div class="device-list" id="deviceList">
            <!-- 기기 목록이 여기에 동적으로 추가됩니다 -->
        </div>
    </div>
    
    <div class="packet-log">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>감지된 패킷 목록</h2>
            <span style="color: #666; font-size: 0.9em;">
                최근 수신/송신된 패킷 중 중복을 제외한 목록입니다. 1초마다 업데이트
            </span>
            <div>
                <label>
                    <input type="checkbox" id="hideUnknown" onchange="updatePacketLogDisplay()"> Unknown 패킷 숨기기
                </label>
                <button onclick="clearPacketLog()">로그 지우기</button>
            </div>
        </div>
        <div class="packet-log-content" id="packetLog">
            <!-- 패킷 로그가 여기에 동적으로 추가됩니다 -->
        </div>
    </div>

    <div class="packet-reference">
        <button type="button" class="collapsible">📚 패킷 참조 자료</button>
        <div class="content">
            <div class="tab-container">
                <div class="tab-buttons" id="deviceTabs">
                    <!-- 탭 버튼이 동적으로 추가됩니다 -->
                </div>
                <div id="tabContents">
                    <!-- 각 디바이스별 패킷 테이블이 여기에 추가됩니다 -->
                </div>
            </div>
            <p><small>* 모든 패킷은 체크섬이 자동으로 계산되어 추가됩니다.</small></p>
        </div>
    </div>
    
    <div class="packet-analyzer-section">
        <div class="packet-analyzer">
            <h2>패킷 분석기</h2>
            <p><small>* 패킷은 7바이트(14자리)로 입력하세요. 체크섬은 자동으로 계산됩니다.</small></p>
            <div class="packet-builder">
                <div>
                    <select id="packetHeaderSelect" onchange="handleHeaderSelect()">
                        <option value="">헤더 선택...</option>
                    </select>
                    <div id="packetByteInputs" style="display: inline-block;">
                        <!-- 바이트 입력 필드가 동적으로 추가됩니다 -->
                    </div>
                </div>
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <div style="flex-grow: 1; display: flex; gap: 10px;">
                    <input type="text" id="packetInput" placeholder="패킷 입력 (예: F7010104000000)">
                    <select id="packetHistory" style="min-width: 100px;" onchange="loadPacketFromHistory()">
                        <option value="">최근 입력...</option>
                    </select>
                </div>
                <button onclick="analyzePacket()">분석</button>
            </div>
            <div class="packet-result" id="packetResult">
                <!-- 분석 결과가 여기에 표시됩니다 -->
            </div>
        </div>
    </div>

    <script src="./static/script.js"></script>
</body>
</html> 